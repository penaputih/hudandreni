<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>RSVP Modal</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
    }

    /* === Modal Overlay === */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      display: none;
    }

    .modal-content {
      background: white;
      max-width: 420px;
      width: 100%;
      border-radius: 16px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      padding: 24px;
      position: relative;
      max-height: 95vh;
      overflow-y: auto;
    }

    h2 {
      text-align: center;
      font-family: serif;
      margin-bottom: 24px;
    }

    input, select, textarea {
      width: 100%;
      padding: 12px;
      margin-bottom: 16px;
      border: 1px solid #ccc;
      border-radius: 10px;
      font-size: 14px;
    }

    .phone-group {
      display: flex;
      gap: 8px;
    }

    .phone-group select {
      flex: 0 0 70px;
    }

    .phone-group input {
      flex: 1;
    }

    button[type="submit"] {
      width: 100%;
      background: #d4af37;
      color: white;
      font-size: 16px;
      padding: 14px;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      font-weight: bold;
    }

    .rsvp-list {
      margin-top: 30px;
      border-top: 1px solid #eee;
    }

    .rsvp-item {
      display: flex;
      gap: 12px;
      padding: 12px;
      border-bottom: 1px solid #eee;
      align-items: flex-start;
    }

    .avatar {
      background: #a3a3ff;
      color: white;
      font-weight: bold;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
    }

    .rsvp-content {
      flex: 1;
    }

    .rsvp-name {
      font-weight: bold;
      margin-bottom: 4px;
    }

    .badge {
      background: #cce7ef;
      color: #036;
      font-size: 12px;
      padding: 2px 6px;
      border-radius: 8px;
      margin-left: 6px;
    }

    .rsvp-message {
      margin-bottom: 4px;
    }

    .rsvp-time {
      font-size: 12px;
      color: #888;
    }

    .close-btn {
      position: absolute;
      bottom: -25px;
      left: 50%;
      transform: translateX(-50%);
      background: #f66;
      color: white;
      font-size: 28px;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }

    #openModalBtn {
      margin: 40px auto;
      display: block;
      background: #d4af37;
      color: white;
      padding: 14px 28px;
      border: none;
      border-radius: 30px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <button id="openModalBtn">Buka RSVP</button>

  <div class="modal-overlay" id="rsvpModal">
    <div class="modal-content">
      <h2>RSVP</h2>
      <form id="rsvp-form">
        <input type="text" id="name" placeholder="Nama Tamu" required />
        <input type="text" id="group" placeholder="Grup" />
        <div class="phone-group">
          <select id="country-code">
            <option value="+62">+62</option>
          </select>
          <input type="tel" id="phone" placeholder="No WhatsApp" />
        </div>
        <select id="attendance" required>
          <option value="">Kehadiran</option>
          <option value="Hadir">Hadir</option>
          <option value="Tidak Hadir">Tidak Hadir</option>
        </select>
        <textarea id="message" placeholder="Komentar atau Ucapan" rows="3"></textarea>
        <button type="submit">Kirim</button>
      </form>

      <div class="rsvp-list" id="rsvp-list"></div>

      <button class="close-btn" id="closeModalBtn">&times;</button>
    </div>
  </div>

  <script>
    const form = document.getElementById("rsvp-form");
    const rsvpList = document.getElementById("rsvp-list");
    const modal = document.getElementById("rsvpModal");
    const openModalBtn = document.getElementById("openModalBtn");
    const closeModalBtn = document.getElementById("closeModalBtn");

    openModalBtn.addEventListener("click", () => {
      modal.style.display = "flex";
    });

    closeModalBtn.addEventListener("click", () => {
      modal.style.display = "none";
    });

    function getInitials(name) {
      const parts = name.trim().split(" ");
      if (parts.length === 1) return parts[0][0];
      return parts[0][0] + parts[1][0];
    }

    function formatTime(date) {
      return new Intl.DateTimeFormat("id-ID", {
        day: "2-digit", month: "long", year: "numeric",
        hour: "2-digit", minute: "2-digit"
      }).format(date);
    }

    function addRsvpCard({ name, attendance, message, timestamp }) {
      const div = document.createElement("div");
      div.className = "rsvp-item";
      const avatar = `<div class="avatar">${getInitials(name).toUpperCase()}</div>`;
      const content = `
        <div class="rsvp-content">
          <div class="rsvp-name">${name} <span class="badge">${attendance}</span></div>
          <div class="rsvp-message">${message || ""}</div>
          <div class="rsvp-time">${formatTime(new Date(timestamp))}</div>
        </div>`;
      div.innerHTML = avatar + content;
      rsvpList.prepend(div);
    }

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value;
      const group = document.getElementById("group").value;
      const phone = document.getElementById("phone").value;
      const attendance = document.getElementById("attendance").value;
      const message = document.getElementById("message").value;
      const timestamp = new Date().toISOString();

      const data = { name, group, phone, attendance, message, timestamp };
      addRsvpCard(data);
      form.reset();
    });
  </script>
</body>
</html>